<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<!-- don't edit start -->


  


  
  <title>Seasar - S2Hessian</title>
  <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">


  
  <meta http-equiv="Content-Style-Type" content="text/css">


  
  <link href="seasar_b.css" type="text/css" rel="stylesheet" media="screen">


  
  <link href="seasar_p.css" type="text/css" rel="stylesheet" media="print">


  
  <script src="seasar_b.js" type="text/JavaScript" language="JavaScript"></script>
</head>


<body onload="preload('ja')">


<table align="left" border="0" cellpadding="0" cellspacing="0" width="100%">


  <tbody>


    <tr>


      <td align="left" valign="top" width="780">
      
      <table class="white" border="0" cellpadding="0" cellspacing="0" width="780">


        <tbody>


          <tr>


            <td colspan="7"><img src="top01_b.gif" alt="" height="5" width="780"></td>


          </tr>


          <tr>


            <td><img src="top02_b.gif" alt="Seasar" height="117" width="235"></td>


            <td colspan="3"><img src="top03.gif" alt="DI Container with AOP" height="117" width="289"></td>


            <td colspan="3"><img src="spacer.gif" alt="" height="117" width="256"></td>


          </tr>


          <tr>


            <td rowspan="2"><img src="top04.gif" alt="" height="49" width="235"></td>


            <td><a href="http://www.seasar.org/index.html"><img src="menu01_b_ja.gif" alt="" id="menu01" onmouseover="swap(1)" onmouseout="restore(1)" border="0" height="30" width="78"></a></td>


            <td><a href="http://www.seasar.org/projects.html"><img src="menu02_b_ja.gif" alt="" id="menu02" onmouseover="swap(2)" onmouseout="restore(2)" border="0" height="30" width="101"></a></td>


            <td><a href="http://www.seasar.org/products.html"><img src="menu03_b_ja.gif" alt="" id="menu03" onmouseover="swap(3)" onmouseout="restore(3)" border="0" height="30" width="110"></a></td>


            <td><a href="http://www.seasar.org/resources.html"><img src="menu04_b_ja.gif" alt="" id="menu04" onmouseover="swap(4)" onmouseout="restore(4)" border="0" height="30" width="113"></a></td>


            <td><img src="menu05_b_ja.gif" alt="" id="menu05" onmouseover="swap(5)" onmouseout="restore(5)" border="0" height="30" width="109"></td>


            <td><img src="menu06.gif" alt="" height="30" width="34"></td>


          </tr>


          <tr>


            <td colspan="6"><img src="spacer.gif" alt="" height="19" width="545"></td>


          </tr>


        
        </tbody>
      
      </table>


      
      <table class="white" border="0" cellpadding="0" cellspacing="0" width="780">


        <tbody>


          <tr>


            <td></td>


            <td></td>


            <td></td>


          </tr>


          <tr align="left" valign="top">


            <td width="14"><img src="spacer.gif" alt="" height="14" width="14"></td>


            <td class="main" width="752">
            
            <p>S2Hessianを使うと、Seasar2のコンポーネントをWSDLなしにクライアントから簡単に呼び出
す事ができるようになります。JAVAでRich
Clientを作る時にはいちいちWSDLを設定する必要がなく、また簡易なプロトコルですのでパフォーマンスも良いと思います。<br>

            <a href="./s2hessian.NET.html">
S2Hessian.Net</a>を使用すれば、C#でSmart Clientを書いて、そこから簡単にSeasar2のコンポーネントを呼び出せます。</p>


            
            <h2><a name="Setup">セットアップ</a></h2>


            
            <p>S2と同様にJDK1.4以上が必要です。サンプルは、<a href="http://jakarta.apache.org/tomcat/">Tomcat</a>と<a href="http://www.sysdeo.com/eclipse/tomcatPlugin.html">Tomcat
Plugin</a>を使うことを前提にしています。あらかじめインストールして置いてください。<a href="./download/s2hessian-0.4.zip">ｓ2hessian</a>と<a href="./download/s2hessian-client-0.4.zip">ｓ2hessian-
client</a>をDownloadし、解凍してできた
s2hessianディレクトリとs2hessian-clientをそれぞれEclipseにインポートしてください。</p>

            
            <p>
なおhessian-3.0.8.jarもlibにいれてありますが、下記URLからDownload出来ます。<br>


            <a href="http://www.caucho.com/hessian/download/hessian-3.0.8.jar">http://www.caucho.com/hessian/download/hessian-3.0.8.jar</a>　</p>

            
            <p></p>

            
            <h2><a name="Setup"></a>DownLoad</h2>

            
            <p><a href="download/s2hessian-0.4.zip">ｓ2hessian</a></p>

            
            <p><a href="download/s2hessian-client-0.4.zip">ｓ2hessian-
client</a>
　</p>


            
            <h2><a name="SetupAll">使い方</a></h2>


            
            <p>まず
Serverとして、ｓ２hessianを起動します。この場合Projectを右クリックし、Tomcatプロジェクトのメニューから、Tomcatコ
ンテキストの更新をクリックしてください。</p>


            
            <p>Tomcatを起動し、s2hessian-clientの
org.seasar.s2hessian.example.TestAOP を実行すると３１ Sampleが走ります。<br>


            <br>


            </p>


            
            <h2>Serverの設定</h2>


&nbsp;　web.xmlに下記設定がされています。
            
            <pre>&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;<br><br>&lt;!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web<br>Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd"&gt;<br><br>&lt;web-app&gt;<br> &lt;servlet&gt;<br> &lt;servlet-name&gt;s2hessian&lt;/servlet-name&gt;<br> &lt;servlet-class&gt;org.seasar.s2hessian.S2HessianServlet&lt;/servlet-class&gt;<br>	&lt;load-on-startup&gt;3&lt;/load-on-startup&gt;<br> &lt;/servlet&gt;<br> &lt;servlet&gt;<br> &lt;servlet-name&gt;s2burlap&lt;/servlet-name&gt;<br> &lt;servlet-class&gt;org.seasar.s2hessian.S2BurlapServlet&lt;/servlet-class&gt;<br>	&lt;load-on-startup&gt;2&lt;/load-on-startup&gt;<br> &lt;/servlet&gt;<br>&lt;servlet&gt;<br> &lt;servlet-name&gt;s2servlet&lt;/servlet-name&gt;<br> &lt;servlet-class&gt;org.seasar.framework.container.servlet.S2ContainerServlet&lt;/servlet-class&gt;<br> &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;<br> &lt;init-param&gt;<br> &lt;param-name&gt;configPath&lt;/param-name&gt;<br> &lt;param-value&gt;app.dicon&lt;/param-value&gt;<br> &lt;/init-param&gt;<br> &lt;init-param&gt;<br> &lt;param-name&gt;debug&lt;/param-name&gt;<br> &lt;param-value&gt;true&lt;/param-value&gt;<br> &lt;/init-param&gt;<br>&lt;/servlet&gt;<br><br> &lt;servlet-mapping&gt;<br>	&lt;servlet-name&gt;s2hessian&lt;/servlet-name&gt;<br> &lt;url-pattern&gt;/s2h/*&lt;/url-pattern&gt;<br> &lt;/servlet-mapping&gt;<br> &lt;servlet-mapping&gt;<br>	&lt;servlet-name&gt;s2burlap&lt;/servlet-name&gt;<br> &lt;url-pattern&gt;/s2b/*&lt;/url-pattern&gt;<br> &lt;/servlet-mapping&gt;<br> &lt;servlet-mapping&gt;<br> &lt;servlet-name&gt;s2servlet&lt;/servlet-name&gt;<br> &lt;url-pattern&gt;/s2servlet&lt;/url-pattern&gt;<br>	&lt;/servlet-mapping&gt;<br>&lt;/web-app&gt;<br></pre>


ここで、通常使用される s2sevletに加え、s2hession（必要により、s2burlap）が設定されています。<br>


            <br>


次に、app.dicon（あるいは、それから呼び出されているdicon）に、公開するComponentを登録します。公開するものには、meta情
報として、「s2hessian｣が指定される事が必要です。<br>

            <br>

Serverには、たとえば下記のInterｆaceとImpl Programがあるとします。<br>

            
            <h3>SeasarTest</h3>


            
            <pre>〜略〜<br>public interface SeasarTest {<br>	<br>public int intPlus(int i,int j);<br>public boolean boolTest(boolean b);<br>public long longPlus(long x,long y);<br>public double doublePlus(double x,double y);<br>public String dateCheck1(Date d);<br>public Date dateCheck2();<br>〜略〜<br>}<br> </pre>

            <br>

            
            <h3>SeasarTestImpl</h3>


            
            <pre>〜略〜<br>public class SeasarTestImpl implements SeasarTest {<br>    public int intPlus(int i, int j) {<br><br>        return i+j;<br>    }<br>    public boolean boolTest(boolean b){<br>        return !b;<br>    }<br>    public long longPlus(long x, long y) {<br><br>        return x+y;<br>    }<br>    public double doublePlus(double x, double y) {<br><br>        return x+y;<br>    }<br><br>    public String dateCheck1(Date d) {<br><br>        int m = d.getMonth();<br>        int dd = d.getDate();<br>        int h=d.getHours();<br>        int mm=d.getMinutes();<br>        String dds=d.toLocaleString();<br>        return dds;<br>    }<br>    public String stringCat(String s1, String s2) {<br>        return s1+s2;<br>    }<br>    public int[] intArray(int[] in) {<br><br>        return in;<br>    }<br>    public Hashtable hashTable(Hashtable ht) {<br>        return ht;<br>    }<br>    public ArrayList arrayList(ArrayList ar){<br>        return ar;<br>    }<br>      public Date dateCheck2() {<br>        Date nd=new Date();<br>        return nd;<br>    }<br>〜略〜<br>}</pre>


            
            <h3>app.dicon</h3>


            
            <pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&lt;!DOCTYPE components PUBLIC "-//SEASAR2.1//DTD S2Container//EN"<br>	"http://www.seasar.org/dtd/components21.dtd"&gt;<br>&lt;components&gt;<br>	&lt;component name="test" class="org.seasar.s2hessian.example.SeasarTestImpl"&gt;<br>	&lt;meta name="s2hessian"/&gt;<br>	&lt;/component&gt;<br>&lt;/components&gt;</pre>


            
            <h2>Clientの設定</h2>

Clientのapp.diconには、下記の様な設定がされています。
            
            <pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br>&lt;!DOCTYPE components PUBLIC "-//SEASAR2.1//DTD S2Container//EN"<br>	"http://www.seasar.org/dtd/components21.dtd"&gt;<br>&lt;components&gt;<br>	&lt;component name="remoting" class="org.seasar.remoting.common.interceptor.RemotingInterceptor"/&gt;<br>	<br>	&lt;component class="org.seasar.remoting.caucho.client.HessianConnector"&gt;<br>	    &lt;property name="baseURL"&gt;new java.net.URL("http://localhost:8080/s2hessian/s2h/")&lt;/property&gt;<br>	&lt;/component&gt;<br>	&lt;component name="test" class="org.seasar.s2hessian.example.SeasarTest"&gt;<br>		&lt;aspect&gt;remoting&lt;/aspect&gt;<br>	&lt;/component&gt;<br>&lt;/components&gt;</pre>

            
            <h3>下記のCodeがClientのSampleです。</h3>

            
            <h3>org.seasar.s2hessian.example.TestAop</h3>


            
            <pre>〜略〜<br>public class TestAop {<br><br>    public static void main(String[] args) {<br>        <br>		S2Container container  = S2ContainerFactory.create("app.dicon");<br>		<br>		SeasarTest seasarTest = (SeasarTest)container.getComponent("test");<br>	    /* Test1 */<br>	    int ires=seasarTest.intPlus(30,50);<br>	    System.out.println("Test1 intPlus result: " +ires);<br>	    <br>	    /* Test2 */<br>	    boolean bres=seasarTest.boolTest(true);<br>	    System.out.println("Test2 boolTest result: " +bres);<br><br>〜略〜</pre>


            
            <h3>SeasarTest</h3>


            
            <pre>public interface SeasarTest {<br>	<br>public int intPlus(int i,int j);<br>public boolean boolTest(boolean b);<br>public long longPlus(long x,long y);<br>public double doublePlus(double x,double y);<br>public String dateCheck1(Date d);<br>public Date dateCheck2();<br>public String stringCat(String s1,String s2);<br>public int[] intArray(int[] in);<br>public Hashtable hashTable(Hashtable ht);<br>public ArrayList arrayList(ArrayList ar);<br>public MyObject myObjectTest(MyObject mx);<br>public MyObject2 myObjectTest2(MyObject2 mo2);<br>}<br> </pre>


            
            <h3>SeasarTestImpl</h3>


            
            <pre>public class SeasarTestImpl implements SeasarTest {<br> public int intPlus(int i, int j) {<br> return i+j;<br> } public boolean boolTest(boolean b){<br> return !b;<br> }<br> public long longPlus(long x, long y) {<br> return x+y;<br> }public double doublePlus(double x, double y) {<br> return x+y;<br> }public String dateCheck1(Date d) {<br> int m = d.getMonth();<br> int dd = d.getDate();<br> int h=d.getHours();<br> int mm=d.getMinutes();<br> String dds=d.toLocaleString();<br> return dds;<br> }public String stringCat(String s1, String s2) {<br> return s1+s2;<br> } public int[] intArray(int[] in) {<br> return in;<br> }public Hashtable hashTable(Hashtable ht) {<br> return ht;<br> }<br> public ArrayList arrayList(ArrayList ar){<br> return ar;<br> } public Date dateCheck2() {<br> Date nd=new Date();<br> return nd;<br> } public MyObject myObjectTest(MyObject mx) {<br> return mx;<br> } public MyObject2 myObjectTest2(MyObject2 mo2) {<br> MyObject2 mores= new MyObject2();<br> MyObject mo= new MyObject();<br> mo=mo2.getMo1();<br> mores.setMo1(mo);<br> return mores;}<br> }<br>}</pre>


            </td>


            <td width="14"><img src="spacer.gif" alt="" height="14" width="14"></td>


          </tr>


          <tr>


            <td></td>


            <td></td>


          </tr>


          <tr>


            <td width="14"><img src="spacer.gif" alt="" height="30" width="14"></td>


            <td width="766"><img src="spacer.gif" alt="" height="30" width="592"></td>


          </tr>


          <tr>


            <td width="14"><img src="spacer.gif" alt="" height="14" width="14"></td>


            <td class="copyright" width="766">&copy;
Copyright The Seasar Project and the others 2004, all rights reserved.</td>


          </tr>


        
        </tbody>
      
      </table>


      </td>


      <td class="backright" align="left" valign="top">&nbsp;</td>


    </tr>


    <tr>


      <td class="backunder" align="left" height="16" valign="top" width="780">&nbsp;</td>


      <td class="backcorner" align="left" height="16" valign="top">&nbsp;</td>


    </tr>


  
  </tbody>
</table>


<!-- don't edit end -->
</body>
</html>
